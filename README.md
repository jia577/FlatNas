# FlatNas

[![GitHub](https://img.shields.io/badge/GitHub-FlatNas-181717?style=flat&logo=github&logoColor=white)](https://github.com/Garry-QD/FlatNas)
[![Gitee](https://img.shields.io/badge/Gitee-FlatNas-C71D23?style=flat&logo=gitee&logoColor=white)](https://gitee.com/gjx0808/FlatNas)
[![Docker Image](https://img.shields.io/badge/Docker-qdnas%2Fflatnas-2496ED?style=flat&logo=docker&logoColor=white)](https://hub.docker.com/r/qdnas/flatnas)

FlatNas æ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜åº¦å¯å®šåˆ¶çš„ä¸ªäººå¯¼èˆªé¡µä¸ä»ªè¡¨ç›˜ç³»ç»Ÿã€‚å®ƒåŸºäº Vue 3 å’Œ Express æ„å»ºï¼Œæ—¨åœ¨ä¸º NAS ç”¨æˆ·ã€æå®¢å’Œå¼€å‘è€…æä¾›ä¸€ä¸ªä¼˜é›…çš„æµè§ˆå™¨èµ·å§‹é¡µã€‚
äº¤æµQQç¾¤:613835409

## âœ¨ ä¸»è¦åŠŸèƒ½

![alt text](1.png) ![alt text](2.png) ![alt text](3.png) ![alt text](4.png)

### ğŸ–¥ï¸ ä»ªè¡¨ç›˜ä¸å¸ƒå±€

- **ç½‘æ ¼å¸ƒå±€**: è‡ªç”±æ‹–æ‹½å¸ƒå±€ï¼Œæ”¯æŒä¸åŒå°ºå¯¸çš„ç»„ä»¶ã€‚
- **åˆ†ç»„ç®¡ç†**: æ”¯æŒåˆ›å»ºå¤šä¸ªåˆ†ç»„ï¼Œåˆ†ç±»ç®¡ç†åº”ç”¨å’Œä¹¦ç­¾ã€‚
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®ã€‚
- **ç¼–è¾‘æ¨¡å¼**: ç›´è§‚çš„æ‰€è§å³æ‰€å¾—ç¼–è¾‘ä½“éªŒï¼Œè½»æ¾æ·»åŠ ã€åˆ é™¤å’Œé‡æ–°æ’åˆ—ç»„ä»¶ã€‚

### ğŸ§© ä¸°å¯Œçš„å°ç»„ä»¶

FlatNas å†…ç½®äº†å¤šç§å®ç”¨çš„å°ç»„ä»¶ï¼Œæ»¡è¶³æ—¥å¸¸éœ€æ±‚ï¼š

- **ä¹¦ç­¾ç»„ä»¶**: å¿«é€Ÿè®¿é—®å¸¸ç”¨ç½‘ç«™ï¼Œæ”¯æŒè‡ªå®šä¹‰å›¾æ ‡ã€‚é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¡«å……å¸¸ç”¨çš„ 10 ä¸ªç½‘ç«™ï¼ˆå¦‚ GitHub, Bilibili ç­‰ï¼‰ã€‚
- **æ—¶é’Ÿä¸å¤©æ°”**: å®æ—¶æ˜¾ç¤ºå½“å‰æ—¶é—´ã€æ—¥æœŸåŠå½“åœ°å¤©æ°”æƒ…å†µã€‚
- **å¾…åŠäº‹é¡¹ (Todo)**: ç®€å•çš„ä»»åŠ¡ç®¡ç†ï¼Œéšæ—¶è®°å½•çµæ„Ÿå’Œå¾…åŠã€‚
- **RSS è®¢é˜…**: å†…ç½® RSS é˜…è¯»å™¨ï¼Œå®æ—¶è·å–è®¢é˜…æºçš„æœ€æ–°å†…å®¹ã€‚
- **çƒ­æœæ¦œå•**: é›†æˆå¾®åšçƒ­æœã€æ–°é—»çƒ­æ¦œç­‰ï¼Œä¸é”™è¿‡å³æ—¶çƒ­ç‚¹ã€‚
- **è®¡ç®—å™¨**: éšæ—¶å¯ç”¨çš„ç®€æ˜“è®¡ç®—å™¨ã€‚
- **éŸ³ä¹æ’­æ”¾å™¨**: å†…ç½® MiniPlayerï¼Œæ”¯æŒæ’­æ”¾æœåŠ¡å™¨ç«¯çš„æœ¬åœ°éŸ³ä¹æ–‡ä»¶ã€‚

### ğŸ¨ ä¸ªæ€§åŒ–å®šåˆ¶

- **å›¾æ ‡ç®¡ç†**: å†…ç½®å›¾æ ‡åº“ï¼Œæ”¯æŒä¸Šä¼ è‡ªå®šä¹‰å›¾ç‰‡ï¼Œå¹¶å…¨é¢æ”¯æŒ **Hex é¢œè‰²ä»£ç ** (å¦‚ `#ffffff`) è‡ªå®šä¹‰å›¾æ ‡èƒŒæ™¯è‰²ã€‚
- **èƒŒæ™¯è®¾ç½®**: æ”¯æŒè‡ªå®šä¹‰å£çº¸ã€‚
- **åˆ†ç»„å¡ç‰‡èƒŒæ™¯**: æ”¯æŒåœ¨åˆ†ç»„è®¾ç½®ä¸­ç»Ÿä¸€é…ç½®è¯¥ç»„æ‰€æœ‰å¡ç‰‡çš„èƒŒæ™¯ï¼ˆå›¾ç‰‡ã€æ¨¡ç³Šã€é®ç½©ï¼‰ï¼Œå®ç°é£æ ¼ç»Ÿä¸€çš„è§†è§‰æ•ˆæœã€‚
- **è®¿å®¢ç»Ÿè®¡**: åº•éƒ¨é¡µè„šæ˜¾ç¤ºç½‘ç«™æ€»è®¿é—®é‡ã€ä»Šæ—¥è®¿é—®é‡åŠå½“å‰åœ¨çº¿æ—¶é•¿ï¼ˆéœ€åœ¨è®¾ç½®ä¸­å¼€å¯ï¼‰ã€‚
- **æ•°æ®å®‰å…¨**:
  - æœ¬åœ°å­˜å‚¨é…ç½® (`server/data/data.json`)ï¼Œæ•°æ®å®Œå…¨æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ã€‚
  - ç®€å•çš„å¯†ç è®¿é—®ä¿æŠ¤ï¼ˆé»˜è®¤å¯†ç ï¼š`admin`ï¼‰ï¼Œä¿æŠ¤éšç§é…ç½®ã€‚
- **CGI æ‰©å±•**: æ”¯æŒé€šè¿‡ Node.js ç¼–å†™ CGI è„šæœ¬æ‰©å±•åç«¯åŠŸèƒ½ï¼ˆä½äº `server/cgi-bin`ï¼‰ã€‚
- **æ›´æ–°æé†’**: å†…ç½®ç‰ˆæœ¬æ£€æµ‹åŠŸèƒ½ï¼Œè‡ªåŠ¨æ£€æŸ¥ GitHub æœ€æ–° Release ç‰ˆæœ¬ï¼Œå¹¶åœ¨è®¾ç½®é¢æ¿æç¤º Docker æ›´æ–°ã€‚

## ğŸ“… æœ€è¿‘æ›´æ–° (v1.0.13)

- **åŠŸèƒ½æ–°å¢**:
  - **è‡ªå®šä¹‰å¤©æ°”æº**: å¤©æ°”ç»„ä»¶æ”¯æŒé…ç½®è‡ªå®šä¹‰ API æºï¼Œæ»¡è¶³ä¸ªæ€§åŒ–æ•°æ®éœ€æ±‚ã€‚
  - **è®¾ç½®åˆ†ç±»ä¼˜åŒ–**: "ä¸‡èƒ½çª—å£"ç›¸å…³è®¾ç½®ç‹¬ç«‹ä¸ºå•ç‹¬çš„æ ‡ç­¾é¡µï¼Œç®¡ç†æ›´åŠ ä¾¿æ·æ¸…æ™°ã€‚
- **ä½“éªŒä¼˜åŒ–**:
  - **ç•Œé¢è°ƒæ•´**: ä¼˜åŒ–äº†ä¸‡èƒ½çª—å£è®¾ç½®é¡µçš„æŒ‰é’®å¸ƒå±€ï¼Œé˜²æ­¢é®æŒ¡ã€‚
  - **å¼•å¯¼æç¤º**: åœ¨ç›¸å…³è®¾ç½®é¡¹å¢åŠ äº†å…³äºæµè§ˆå™¨æ’ä»¶çš„å¼•å¯¼æç¤ºï¼Œå¸®åŠ©è§£å†³è·¨åŸŸè®¿é—®é—®é¢˜ã€‚

## ğŸ“… å†å²æ›´æ–° (v1.0.12)

- **åŠŸèƒ½æ–°å¢**:
  - **éŸ³ä¹ä¸Šä¼ **: æ·»åŠ äº†éŸ³ä¹æ–‡ä»¶çš„ä¸Šä¼ å…¥å£ï¼Œæ”¯æŒæ‰¹é‡æ·»åŠ éŸ³ä¹æ–‡ä»¶ã€‚
  - **å›¾æ ‡æœç´¢**: æ·»åŠ äº†å›¾æ ‡çš„æ¨¡ç³Šæœå¯»ç»„ä»¶ï¼ŒæŸ¥æ‰¾å›¾æ ‡æ›´ä¾¿æ·ã€‚
  - **å¤‡æ³¨åŠŸèƒ½**: æ·»åŠ äº†æ°´å¹³æ¨¡å¼ä¸‹çš„å¤‡æ³¨åŠŸèƒ½ã€‚
  - **å¯¼å…¥æ”¯æŒ**: æ”¯æŒé€šè¿‡ JSON æ–‡ä»¶æ–°å¢é¡¹ç›®ï¼ˆæŒ‡å®šæ ¼å¼ï¼‰ã€‚
- **æ€§èƒ½ä¸ä¼˜åŒ–**:
  - **ç¼“å­˜ä¼˜åŒ–**: æ·»åŠ åŸå­å†™å…¥ä¼˜åŒ–ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘ç¼“å­˜é—®é¢˜ã€‚
  - **å¸ƒå±€ä¼˜åŒ–**: ä¼˜åŒ–å‚ç›´æ¨¡å¼ä¸‹æ— å¡ç‰‡çš„å°ºå¯¸é€»è¾‘ã€‚
  - **æ’ä»¶æ›´æ–°**: ä¼˜åŒ–ä¸‡èƒ½çª—å£æµè§ˆå™¨æ’ä»¶ï¼ˆå†…æµ‹ä¸­ï¼‰å¹¶æ¨é€åˆ° GitHubã€‚

## ğŸ“… å†å²æ›´æ–° (v1.0.11)

- **ä¹¦ç­¾ç»„ä»¶å¢å¼º**:
  - **è‡ªåŠ¨æŠ“å–**: æ·»åŠ ä¹¦ç­¾æ—¶ï¼Œåªéœ€è¾“å…¥ç½‘å€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ“å–ç½‘é¡µçš„**æ ‡é¢˜**å’Œ**å›¾æ ‡**ï¼Œå¤§å¹…ç®€åŒ–æ“ä½œæµç¨‹ã€‚
  - **åç«¯ä»£ç†**: æ–°å¢ `/api/fetch-meta` æ¥å£ï¼Œåˆ©ç”¨æœåŠ¡ç«¯ä»£ç†è¯·æ±‚è§£å†³å‰ç«¯è·¨åŸŸ (CORS) é—®é¢˜ï¼ŒæŠ“å–æˆåŠŸç‡æ›´é«˜ã€‚
  - **ä¸€é”®å¯¼å…¥**: æ”¯æŒå¯¼å…¥æµè§ˆå™¨ä¹¦ç­¾æ–‡ä»¶ (\*.html)ï¼Œè‡ªåŠ¨åˆ›å»ºæ–°åˆ†ç±»å¹¶æ‰¹é‡å¯¼å…¥ä¹¦ç­¾ã€‚
- **ç•Œé¢ä¼˜åŒ–**:
  - **å¸ƒå±€è°ƒæ•´**: ä¹¦ç­¾ç»„ä»¶ç”±åŸæ¥çš„ç½‘æ ¼å¸ƒå±€æ”¹ä¸ºå‚ç›´åˆ—è¡¨å¸ƒå±€ï¼Œå±•ç¤ºæ›´å¤šä¿¡æ¯ï¼ˆæ ‡é¢˜ã€URLï¼‰ï¼Œæ›´åŠ æ¸…æ™°æ˜“è¯»ã€‚

## ğŸ“… å†å²æ›´æ–° (v1.0.9)

- **ç»„ä»¶åŠŸèƒ½å¢å¼º**:
  - **å…¨ç»„ä»¶è‡ªç”±å°ºå¯¸**: ä¸‡èƒ½çª—å£ï¼ˆIframeï¼‰çš„ 4x4 è‡ªç”±å°ºå¯¸é€‰æ‹©åŠŸèƒ½ç°å·²æ‰©å±•è‡³**æ‰€æœ‰å°ç»„ä»¶**ï¼Œå¸ƒå±€æ›´åŠ çµæ´»ã€‚
- **ç•Œé¢ä¼˜åŒ–**:
  - **è®¾ç½®é¡µåº•éƒ¨é‡æ„**: ä¼˜åŒ–äº†è®¾ç½®é¢æ¿åº•éƒ¨çš„ç‰ˆæƒä¿¡æ¯åŒºåŸŸï¼Œé‡‡ç”¨åŒè¡Œå¸ƒå±€ï¼ˆç‰ˆæœ¬å·ä¸å›¾æ ‡åˆ†ç¦»ï¼‰ï¼Œè§†è§‰æ›´åŠ æ¸…çˆ½ã€‚
  - **å›¾æ ‡æ›´æ–°**: æ›¿æ¢äº† GitHub å’Œ Docker çš„å›¾æ ‡ä¸ºå®˜æ–¹é«˜æ¸…ç´ æã€‚
  - **æ–°ç‰ˆæœ¬æé†’**: åœ¨ç‰ˆæœ¬å·æ—æ–°å¢äº†çº¢ç‚¹æé†’åŠŸèƒ½ï¼Œå½“æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬æ—¶è‡ªåŠ¨æç¤ºã€‚

## ğŸ“… å†å²æ›´æ–° (v1.0.7)

- **äº¤äº’ä½“éªŒä¼˜åŒ–**:
  - ä¿®å¤äº†å¡ç‰‡æ‹–æ‹½æ’åºåçŠ¶æ€æ›´æ–°å»¶è¿Ÿçš„é—®é¢˜ï¼Œç°åœ¨æ‹–åŠ¨å³å¯å®æ—¶ä¿å­˜ã€‚
  - ä¿®å¤äº†ç¼–è¾‘æ¨¡å¼ä¸‹æ‹–åŠ¨å¡ç‰‡åï¼Œå†æ¬¡ç¼–è¾‘å¡ç‰‡å¯¼è‡´ä½ç½®é‡ç½®çš„é—®é¢˜ã€‚
  - ä¼˜åŒ–äº†æ‹–æ‹½é€»è¾‘ï¼Œåœ¨æœç´¢çŠ¶æ€ä¸‹ç¦ç”¨æ‹–æ‹½ï¼Œé˜²æ­¢è¯¯æ“ä½œã€‚
- **è§†è§‰ä¿®å¤**:
  - ä¿®å¤äº†å›¾æ ‡èƒŒæ™¯è‰²æ— æ³•æ­£ç¡®è¯†åˆ« Hex é¢œè‰²ä»£ç å¯¼è‡´æ˜¾ç¤ºä¸ºé»‘è‰²çš„é—®é¢˜ã€‚

## ğŸ“… å†å²æ›´æ–° (v1.0.6)

- **è§†è§‰ä½“éªŒä¼˜åŒ–**: è°ƒæ•´äº†å°ç»„ä»¶å¡ç‰‡çš„å­—ä½“å¤§å° (14px) å’Œé—´è·ï¼Œæå‡äº†åœ¨ä¸åŒå±å¹•ä¸‹çš„é˜…è¯»èˆ’é€‚åº¦ã€‚
- **æ›´æ–°æé†’åŠŸèƒ½**: æ–°å¢ Docker ç‰ˆæœ¬æ›´æ–°æ£€æµ‹æœºåˆ¶ã€‚
  - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ GitHub Releases çš„æœ€æ–°ç‰ˆæœ¬ã€‚
  - å½“æœ‰æ–°ç‰ˆæœ¬æ—¶ï¼Œè®¾ç½®é¢æ¿ä¼šæ˜¾ç¤ºçº¢è‰²æ›´æ–°æé†’ï¼Œç‚¹å‡»å¯ç›´è¾¾ Release é¡µé¢ã€‚

## ğŸŒ æ™ºèƒ½ç½‘ç»œç¯å¢ƒæ£€æµ‹

FlatNas åç«¯é›†æˆäº†æ™ºèƒ½ç½‘ç»œç¯å¢ƒè¯†åˆ«åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„è®¿é—®æ¥æºè‡ªåŠ¨åˆ‡æ¢å†…å¤–ç½‘è®¿é—®ç­–ç•¥ï¼Œå®Œç¾è§£å†³æ··åˆç½‘ç»œç¯å¢ƒä¸‹çš„è®¿é—®éš¾é¢˜ã€‚

### 1. åŠŸèƒ½æè¿°

- **å¤šç»´åº¦è¯†åˆ«**: ç»“åˆ **å®¢æˆ·ç«¯ IP**ã€**è®¿é—®åŸŸå** å’Œ **ç½‘ç»œå»¶è¿Ÿ** ä¸‰ä¸ªç»´åº¦ï¼Œç²¾å‡†åˆ¤æ–­ç”¨æˆ·å½“å‰æ‰€å¤„çš„ç½‘ç»œç¯å¢ƒï¼ˆå±€åŸŸç½‘/äº’è”ç½‘ï¼‰ã€‚
- **è‡ªåŠ¨è·¯ç”±**: å½“æ£€æµ‹åˆ°ç”¨æˆ·å¤„äºå±€åŸŸç½‘ï¼ˆLANï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¼˜å…ˆä½¿ç”¨é…ç½®çš„ **å†…ç½‘åœ°å€ (LanUrl)**ï¼Œå®ç°é«˜é€Ÿç›´è¿ï¼›åœ¨å…¬ç½‘ç¯å¢ƒåˆ™è‡ªåŠ¨åˆ‡æ¢è‡³ **å¤–ç½‘åœ°å€**ã€‚
- **æ— æ„Ÿåˆ‡æ¢**: ç”¨æˆ·æ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼Œæ— è®ºæ˜¯åœ¨å®¶ï¼ˆå†…ç½‘ï¼‰è¿˜æ˜¯å¤–å‡ºï¼ˆå¤–ç½‘ï¼‰ï¼Œç‚¹å‡»åŒä¸€ä¸ªå›¾æ ‡å³å¯è‡ªåŠ¨è·³è½¬è‡³æœ€ä½³åœ°å€ã€‚

### 2. æŠ€æœ¯å®ç°

#### æ ¸å¿ƒæ£€æµ‹é€»è¾‘

åç«¯ (`server/server.js`) ä¸å‰ç«¯ååŒå·¥ä½œï¼Œå®ç°äº†ä»¥ä¸‹æ£€æµ‹æµç¨‹ï¼š

1.  **IP æ¥æºåˆ†æ**:
    - åç«¯é€šè¿‡è§£æ HTTP è¯·æ±‚å¤´ä¸­çš„ `X-Forwarded-For` å’Œ `Socket Remote Address` è·å–çœŸå®å®¢æˆ·ç«¯ IPã€‚
    - æ”¯æŒ **IPv4/IPv6 åŒæ ˆ** è¯†åˆ«ï¼Œè‡ªåŠ¨å¤„ç† `::ffff:` æ˜ å°„æ ¼å¼ã€‚
2.  **ç½‘ç»œè¿é€šæ€§æ¢æµ‹**:
    - æä¾› `/api/ping` æ¥å£ï¼Œåç«¯è°ƒç”¨ç³»ç»Ÿåº•å±‚ ICMP åè®®æ¢æµ‹ç›®æ ‡ä¸»æœºï¼ˆé»˜è®¤ 223.5.5.5ï¼‰çš„å»¶è¿Ÿã€‚
    - ç”¨äºè¾…åŠ©åˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦å…·å¤‡å¤–ç½‘è®¿é—®èƒ½åŠ›ã€‚
3.  **ç¯å¢ƒåˆ¤æ–­ç®—æ³•**:
    ```javascript
    // å‰ç«¯ç»¼åˆåˆ¤å®šé€»è¾‘
    const isLanMode =
      isInternalIp(clientIp) || // å®¢æˆ·ç«¯IPå±äºå†…ç½‘æ®µ (192.168.x.x, 10.x.x.x, etc.)
      isInternalHostname(window.location.hostname); // è®¿é—®åŸŸåå±äºå†…ç½‘ (localhost, .local)
    ```

### 3. ä½¿ç”¨æŒ‡å—

1.  **é…ç½®å†…ç½‘åœ°å€**:
    - åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œå³é”®ç‚¹å‡»ä»»æ„ç»„ä»¶é€‰æ‹©"ç¼–è¾‘"ã€‚
    - åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼Œé™¤äº†å¡«å†™"é“¾æ¥åœ°å€"ï¼ˆå¤–ç½‘ï¼‰å¤–ï¼Œè¿˜å¯ä»¥å¡«å†™ **"å†…ç½‘é“¾æ¥"**ã€‚
2.  **å…¸å‹åœºæ™¯**:
    - **å®¶åº­ NAS**: å¤–ç½‘å¡« `https://nas.yourdomain.com`ï¼Œå†…ç½‘å¡« `http://192.168.1.10:5000`ã€‚
    - **å¼€å‘è°ƒè¯•**: è‡ªåŠ¨è¯†åˆ« `localhost` è®¿é—®ï¼Œä¼˜å…ˆèµ°æœ¬åœ°æœåŠ¡ç«¯å£ã€‚

### 4. æ³¨æ„äº‹é¡¹

- **åå‘ä»£ç†è®¾ç½®**: å¦‚æœä½¿ç”¨ Nginx/Traefik ç­‰åå‘ä»£ç†ï¼ŒåŠ¡å¿…é€ä¼ çœŸå® IPï¼Œå¦åˆ™åç«¯å¯èƒ½æ— æ³•æ­£ç¡®è¯†åˆ«å®¢æˆ·ç«¯æ¥æºï¼š
  ```nginx
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  ```
- **Fallback æœºåˆ¶**: å¦‚æœæœªé…ç½®å†…ç½‘åœ°å€ï¼Œå³ä½¿åœ¨å†…ç½‘ç¯å¢ƒä¹Ÿä¼šå›é€€ä½¿ç”¨å¤–ç½‘åœ°å€ï¼Œç¡®ä¿æœåŠ¡å¯ç”¨æ€§ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
FlatNas/
â”œâ”€â”€ src/                # å‰ç«¯ Vue æºç 
â”œâ”€â”€ server/             # åç«¯ Express æœåŠ¡
â”‚   â”œâ”€â”€ data/           # [é‡è¦] ç”¨æˆ·æ•°æ®å­˜å‚¨ (data.json)
â”‚   â”œâ”€â”€ music/          # [é‡è¦] éŸ³ä¹æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ cgi-bin/        # CGI è„šæœ¬ç›®å½•
â”‚   â””â”€â”€ server.js       # åç«¯å…¥å£
â”œâ”€â”€ public/             # é™æ€èµ„æº (å›¾æ ‡ç­‰)
â”œâ”€â”€ dist/               # æ„å»ºäº§ç‰©
â””â”€â”€ ...
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **ç¯å¢ƒè¦æ±‚**: Node.js ^20.19.0 || >=22.12.0
- **å‰ç«¯**: Vue 3, Vite, TypeScript, TailwindCSS, Pinia
- **åç«¯**: Node.js, Express
- **æ•°æ®å­˜å‚¨**: JSON æ–‡ä»¶å­˜å‚¨ (æ— éœ€é…ç½®æ•°æ®åº“)
- **å…¶ä»–**: RSS Parser, Vue Draggable Plus

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <your-repo-url>
   cd FlatNas
   ```

2. **å®‰è£…ä¾èµ–**

   ```bash
   npm install
   ```

3. **å¯åŠ¨é¡¹ç›®**
   è¯¥å‘½ä»¤ä¼šåŒæ—¶å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨å’Œåç«¯ API æœåŠ¡ï¼š

   ```bash
   npm start
   ```

   > **âš ï¸ Windows ç”¨æˆ·æ³¨æ„**: å¦‚æœåœ¨ PowerShell ä¸­è¿è¡Œ `npm start` é‡åˆ°æ‰§è¡Œç­–ç•¥é”™è¯¯ï¼ˆå¦‚ `UnauthorizedAccess`ï¼‰ï¼Œè¯·å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š
   >
   > - ä½¿ç”¨ `Command Prompt (cmd)` è¿è¡Œå‘½ä»¤ã€‚
   > - æˆ–è€…æ‰‹åŠ¨åˆ†åˆ«è¿è¡ŒæœåŠ¡ï¼š
   >
   >   ```bash
   >   # ç»ˆç«¯ 1 (åç«¯)
   >   node server/server.js
   >
   >   # ç»ˆç«¯ 2 (å‰ç«¯)
   >   node node_modules/vite/bin/vite.js
   >   ```
   - å‰ç«¯åœ°å€: `http://localhost:5173`
   - åç«¯åœ°å€: `http://localhost:3000`

### éƒ¨ç½²æ„å»º

1. **æ„å»ºå‰ç«¯**

   ```bash
   npm run build
   ```

   æ„å»ºäº§ç‰©å°†ç”Ÿæˆåœ¨ `dist` ç›®å½•ä¸‹ã€‚

2. **è¿è¡Œç”Ÿäº§æœåŠ¡**
   ```bash
   npm run server
   ```
   æ­¤æ—¶å¯ä»¥é€šè¿‡ `http://localhost:3000` è®¿é—®å®Œæ•´åº”ç”¨ï¼ˆåç«¯ä¼šæ‰˜ç®¡ `dist` ç›®å½•ä¸‹çš„é™æ€æ–‡ä»¶ï¼‰ã€‚

## ğŸ³ Docker éƒ¨ç½²

é¡¹ç›®åŒ…å« `Dockerfile`ï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ã€‚

1. **æ„å»ºé•œåƒ**

   ```bash
   docker build -t flatnas .
   ```

2. **è¿è¡Œå®¹å™¨**

   ```bash
   docker run -d \
     -p 3000:3000 \
     -v $(pwd)/server/data:/app/server/data \
     -v $(pwd)/server/music:/app/server/music \
     --name flatnas \
     flatnas
   ```

   > **æ³¨æ„**: å»ºè®®æŒ‚è½½ `data` å’Œ `music` ç›®å½•ï¼Œä»¥ç¡®ä¿é…ç½®æ•°æ®å’ŒéŸ³ä¹æ–‡ä»¶åœ¨å®¹å™¨é‡å¯åä¸ä¼šä¸¢å¤±ã€‚

3. **docker-compose**

   ```bash
   version: '3.8'

   services:
     flatnas:
       image: qdnas/flatnas:latest
       container_name: flatnas
       restart: unless-stopped
       ports:
         - '23000:3000'
       volumes:
         - ./data:/app/server/data #æŒ‡å®šè·¯å¾„ä¸‹æ–°å»ºdata
         - ./music:/app/server/music #æ˜ å°„æ’­æ”¾å™¨è·¯å¾„
   ```

## ğŸš€ ä¸€é”®éƒ¨ç½² (Debian)

å¦‚æœæ‚¨ä½¿ç”¨ Debian ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨æˆ‘ä»¬æä¾›çš„è‡ªåŠ¨åŒ–è„šæœ¬è¿›è¡Œæ—  Docker éƒ¨ç½²ã€‚
è¯¦ç»†æŒ‡å—è¯·å‚è€ƒï¼š[ä¸€é”®éƒ¨ç½²æ–‡æ¡£](README_DEPLOY.md)

### å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰

æ— éœ€æ‰‹åŠ¨ä¸‹è½½ä»£ç ï¼Œç›´æ¥è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š

```bash
wget -O deploy.sh https://raw.githubusercontent.com/Garry-QD/FlatNas/main/deploy.sh && sudo bash deploy.sh install
```

### æ‰‹åŠ¨å®‰è£…

```bash
git clone https://github.com/Garry-QD/FlatNas.git
cd FlatNas
chmod +x deploy.sh
sudo ./deploy.sh install
```

## âš™ï¸ é…ç½®è¯´æ˜

- **é»˜è®¤å¯†ç **: ç³»ç»Ÿåˆå§‹å¯†ç ä¸º `admin`ï¼Œè¯·ç™»å½•ååœ¨è®¾ç½®ä¸­åŠæ—¶ä¿®æ”¹ã€‚
- **æ•°æ®æ–‡ä»¶**: æ‰€æœ‰é…ç½®ï¼ˆå¸ƒå±€ã€ç»„ä»¶ã€ä¹¦ç­¾ç­‰ï¼‰å‡å­˜å‚¨åœ¨ `server/data/data.json` ä¸­ã€‚
- **éŸ³ä¹æ–‡ä»¶**: å°† MP3 æ–‡ä»¶æ”¾å…¥ `server/music` ç›®å½•ï¼Œåˆ·æ–°é¡µé¢åå³å¯åœ¨æ’­æ”¾å™¨ä¸­çœ‹åˆ°ã€‚
- **CGI è„šæœ¬**: å°†è‡ªå®šä¹‰è„šæœ¬æ”¾å…¥ `server/cgi-bin` ç›®å½•ï¼Œå¯é€šè¿‡ `/cgi-bin/script.cgi` è®¿é—®ã€‚

## ğŸ“ å¾…åŠäº‹é¡¹ / è®¡åˆ’

- [ ] å¢åŠ æ›´å¤šç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯äº¤äº’ä½“éªŒ
- [ ] æ”¯æŒå¤šç”¨æˆ·ç³»ç»Ÿ
- [ ] åœ¨çº¿æ›´æ¢å£çº¸åº“

## ğŸ“œ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [GNU AGPLv3](LICENSE) åè®®å¼€æºã€‚

---

Enjoy your FlatNas! ğŸš€
